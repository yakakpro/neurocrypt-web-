<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>üîÅ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¢–æ—Ç–æ–∂–Ω–æ—Å—Ç—ñ</title>
  <style>
    body {
      background: #0d0d0d;
      color: #eee;
      font-family: 'Segoe UI', sans-serif;
      padding: 30px;
      max-width: 700px;
      margin: auto;
    }
    h2, h3 { text-align: center; }
    input, textarea, button {
      width: 100%;
      background: #1a1a1a;
      color: #eee;
      padding: 10px;
      border: 1px solid #444;
      margin: 10px 0;
    }
    button:hover { background: #333; }
    #result {
      text-align: center;
      margin-top: 30px;
      font-size: 1.2em;
    }
    pre {
      background: #111;
      padding: 10px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h2>üîÅ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –†–µ–∑–æ–Ω–∞–Ω—Å–Ω–æ—ó –¢–æ—Ç–æ–∂–Ω–æ—Å—Ç—ñ</h2>
  <p style="text-align:center;">–ó–∞–≤–∞–Ω—Ç–∞–∂ –ø–∞—Å–ø–æ—Ä—Ç —Ç–∞ –≤–≤–µ–¥–∏ —Å–≤—ñ–π –≥–ª—ñ—Ñ ‚Äî —á–∏ –≤—Å–µ —â–µ —Ç–∏ —Ü–µ —Ç–∏?</p>

  <h3>1Ô∏è‚É£ –ó–∞–≤–∞–Ω—Ç–∞–∂ –ø–∞—Å–ø–æ—Ä—Ç (.json):</h3>
  <input type="file" accept=".json" onchange="loadPassport(event)" />

  <h3>2Ô∏è‚É£ –í–≤–µ–¥–∏ –≥–ª—ñ—Ñ (—á–µ—Ä–µ–∑ +):</h3>
  <textarea id="userGlyph" rows="2" placeholder="–ø—Ä–∏–∫–ª–∞–¥: –≤–æ–¥–∞+–Ω—ñ—á+–¥–∑–≤—ñ–Ω+üåë+–º–∏—Ç—å"></textarea>

  <button onclick="checkIdentity()">‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ—Ç–æ–∂–Ω—ñ—Å—Ç—å</button>

  <div id="result"></div>
  <pre id="passportRaw" style="display:none;"></pre>

  <script>
    let passport = null;

    function loadPassport(e) {
      const reader = new FileReader();
      reader.onload = function () {
        passport = JSON.parse(reader.result);
        document.getElementById("passportRaw").textContent = JSON.stringify(passport, null, 2);
        document.getElementById("passportRaw").style.display = "block";
      };
      reader.readAsText(e.target.files[0]);
    }

    function checkIdentity() {
      if (!passport) {
        alert("–°–ø–æ—á–∞—Ç–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂ –ø–∞—Å–ø–æ—Ä—Ç!");
        return;
      }

      const input = document.getElementById("userGlyph").value.trim();
      const entered = input.split('+').map(x => x.trim());
      const original = passport.glyph || [];

      const matched = entered.filter(x => original.includes(x)).length;
      const percent = Math.round((matched / original.length) * 100);
      const result = document.getElementById("result");

      if (percent >= 60) {
        result.innerHTML = `‚úÖ <b>–¢–æ—Ç–æ–∂–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ.</b><br>–ó–±—ñ–≥: ${percent}%`;
      } else {
        result.innerHTML = `‚ùå <b>–ù–µ—Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å.</b><br>–¢–≤—ñ–π –≥–ª—ñ—Ñ –∑–º—ñ–Ω–∏–≤—Å—è. –ó–±—ñ–≥: ${percent}%`;
      }
    }
  </script>
</body>
</html>
